<!DOCTYPE html>
<html>

<head>
    <title>Icon Generator</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial;
            background: #111;
            color: #fff;
        }

        canvas {
            border: 1px solid #333;
            margin: 10px;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .icon-preview {
            text-align: center;
        }

        button {
            padding: 10px 20px;
            background: #00f0ff;
            color: #000;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <!-- Navbar (Loaded Dynamically) -->
    <div id="navbar-placeholder"></div>
    <!-- Navbar (Loaded Dynamically) -->
    <div id='navbar-placeholder'></div>
    <h1>VedSAAS Icon Generator</h1>
    <input type="file" id="logoInput" accept="image/*">
    <button onclick="generateIcons()">Generate All Icons</button>
    <div class="container" id="iconContainer"></div>

    <script>
        let logoImg = null;

        document.getElementById('logoInput').addEventListener('change', (e) => {
            const file = e.target.files[0];
            const reader = new FileReader();
            reader.onload = (event) => {
                logoImg = new Image();
                logoImg.onload = () => {
                    console.log('Logo loaded:', logoImg.width, 'x', logoImg.height);
                };
                logoImg.src = event.target.result;
            };
            reader.readAsDataURL(file);
        });

        function generateIcons() {
            if (!logoImg) {
                alert('Please select logo first!');
                return;
            }

            const container = document.getElementById('iconContainer');
            container.innerHTML = '';

            // Icon configurations
            const configs = [
                { size: 192, name: 'icon-192x192.png', maskable: false },
                { size: 512, name: 'icon-512x512.png', maskable: false },
                { size: 192, name: 'icon-maskable-192x192.png', maskable: true },
                { size: 512, name: 'icon-maskable-512x512.png', maskable: true },
                { size: 180, name: 'apple-touch-icon.png', maskable: false }
            ];

            configs.forEach(config => {
                const canvas = document.createElement('canvas');
                canvas.width = config.size;
                canvas.height = config.size;
                const ctx = canvas.getContext('2d');

                // Gradient background (cyan to purple)
                const gradient = ctx.createLinearGradient(0, 0, config.size, config.size);
                gradient.addColorStop(0, '#00f0ff');
                gradient.addColorStop(1, '#7000ff');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, config.size, config.size);

                // Calculate logo size (80% for maskable, 90% for regular)
                const logoScale = config.maskable ? 0.6 : 0.8;
                const logoSize = config.size * logoScale;
                const logoX = (config.size - logoSize) / 2;
                const logoY = (config.size - logoSize) / 2;

                // Draw logo
                ctx.drawImage(logoImg, logoX, logoY, logoSize, logoSize);

                // Create preview
                const preview = document.createElement('div');
                preview.className = 'icon-preview';
                preview.innerHTML = `
                    <h3>${config.name}</h3>
                    <canvas width="${config.size}" height="${config.size}"></canvas>
                    <br>
                    <a href="#" onclick="downloadIcon(this, '${config.name}')" data-canvas-id="${config.name}">Download</a>
                `;
                const previewCanvas = preview.querySelector('canvas');
                previewCanvas.getContext('2d').drawImage(canvas, 0, 0);
                previewCanvas.dataset.name = config.name;
                container.appendChild(preview);
            });
        }

        function downloadIcon(link, filename) {
            event.preventDefault();
            const canvas = link.parentElement.querySelector('canvas');
            canvas.toBlob((blob) => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.click();
                URL.revokeObjectURL(url);
            });
        }
    </script>
    <!-- Component Loader -->
    <script src="/public/js/components.js"></script>
    </body>

</html>
