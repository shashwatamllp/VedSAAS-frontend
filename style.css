*{margin:0;padding:0;box-sizing:border-box}

/* base layout */
html,body{height:100%;font-family:'Segoe UI',sans-serif;background:#1e1e2f;color:#fff;overflow:hidden}
body.dark-mode{background:#0e0e12}

/* main shell */
.container{display:flex;height:100vh;position:relative;z-index:1;overflow:hidden}
.sidebar{width:20%;min-width:275px;background:#232336;padding:18px;display:flex;flex-direction:column;gap:12px;overflow:auto}
.sidebar .title{text-align:center;font-weight:700;font-size:15px;color:#eee}
.new-topic-btn{background:#0078d4;color:#fff;border:none;padding:10px;border-radius:8px;cursor:pointer;width:100%}
.history-list{flex:1;overflow:auto;margin-top:10px;border-top:1px solid #333;padding-top:10px}
.topic{padding:8px 10px;margin-bottom:8px;border-radius:8px;cursor:pointer;color:#ddd}
.topic.active{background:#2e7bbd;color:#fff}
.topic .preview{color:#bbb;font-size:13px;margin-top:4px}
.settings-summary{margin-top:8px}
.user-chip{display:flex;align-items:center;gap:10px;background:#2f2f42;border:1px solid #4a4a60;padding:10px 12px;border-radius:10px;cursor:pointer}
.user-chip:hover{background:#34344e}
.user-avatar{width:26px;height:26px;border-radius:50%;background:#0078d4;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;overflow:hidden}
.user-avatar img{width:100%;height:100%;object-fit:cover;display:block}
.user-name{font-size:13px;color:#ddd;flex:1}
.settings-caret{color:#aaa}
.settings-panel{display:none;margin-top:8px}
.settings-panel .btn-like, .settings-panel button{display:block;width:100%;text-align:left;background:none;border:1px solid #3a3a4d;border-radius:8px;color:#ddd;padding:10px 12px;cursor:pointer;margin-bottom:6px}
.settings-panel button:hover,.settings-panel .btn-like:hover{background:#2f2f42;color:#fff}

.main{flex:1;display:flex;flex-direction:column;min-width:0;overflow:hidden}
.rail{position:relative;width:min(920px,100%);margin:0 auto;height:100%;display:flex;flex-direction:column;min-width:0;min-height:0}
.rail::before{content:"";background:url('images/logopic.png') no-repeat center/60%;opacity:.10;position:absolute;inset:0;z-index:0;pointer-events:none}

.topbar{padding:14px 18px;border-bottom:1px solid #333;display:flex;align-items:center;justify-content:center;background:transparent;position:relative;z-index:1}
.topbar h1{margin:0;font-size:20px;letter-spacing:1px}
.top-controls{position:absolute;right:0;top:50%;transform:translateY(-50%);display:flex;gap:8px;align-items:center}
.topbar .meta{color:#bbb;font-size:14px}

.content{flex:1;min-height:0;display:flex;flex-direction:column;z-index:1}
.chat-area{flex:1;min-height:0;overflow:auto;padding:20px;display:flex;flex-direction:column;gap:12px}
.message-row{max-width:80%;position:relative;line-height:1.5}
.from-user{align-self:flex-end}
.from-bot{align-self:flex-start}
.msg-label{font-size:12px;color:#bbb;margin-bottom:4px}
.message-row .msg-body{background:none;color:#fff;padding:0;border-radius:0;box-shadow:none;white-space:pre-wrap;word-break:break-word;overflow-wrap:anywhere}
.msg-actions{position:absolute;right:-2px;bottom:-18px;display:flex;gap:6px;opacity:0;transition:opacity .15s}
.message-row:hover .msg-actions{opacity:1}
.msg-actions button{background:rgba(0,0,0,.25);border:1px solid #4a4a60;border-radius:6px;color:#fff;font-size:12px;padding:2px 6px;cursor:pointer}
.msg-actions button:hover{background:rgba(255,255,255,.12)}

.composer-wrap{position:sticky;bottom:0;z-index:2;border-top:1px solid #3a3a4d;background:transparent;padding:12px 16px;display:flex;justify-content:center}
.composer{width:100%;display:flex;align-items:flex-end;gap:10px;background:transparent;border:none;border-radius:0;padding:0;box-shadow:none!important}
.composer textarea{flex:1;background:transparent;color:#fff;border:none;outline:none;font-size:15px;line-height:1.4;resize:none;max-height:10rem;min-height:44px;overflow:auto}
.composer .send-btn{width:42px;height:42px;flex:0 0 42px;display:flex;align-items:center;justify-content:center;border-radius:10px;border:1px solid #4a4a60;background:#2f2f42;color:#fff;cursor:pointer}
.composer .send-btn[disabled]{opacity:.5;cursor:not-allowed}
.composer .send-btn:hover:not([disabled]){background:#3b3b53}

.landing{flex:1;display:flex;align-items:center;justify-content:center}
.landing-card{background:rgba(44,44,62,0.92);border:1px solid #333;border-radius:12px;padding:22px;width:min(720px,90vw);box-shadow:none!important;text-align:center;position:relative;z-index:1}
.landing .title{font-size:18px;margin-bottom:6px;color:#e9e9e9}
.landing .hint{font-size:13px;color:#bdbdbd;margin-bottom:12px}
.landing .composer{margin-top:10px}
.landing-actions{display:flex;gap:10px;justify-content:center;margin-top:12px}
.btn{background:#444;border:none;color:#fff;padding:10px 12px;border-radius:8px;cursor:pointer}
.btn:hover{background:#555}

.overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:50;background:rgba(0,0,0,0.5)}
.auth-box{background:#2c2c3e;padding:28px;border-radius:12px;width:360px;box-shadow:0 6px 30px rgba(0,0,0,0.6);max-height:90vh;overflow:auto;border:1px solid #3a3a4d}
.auth-box h2{color:#fff;margin-bottom:12px;text-align:center}
.auth-box input{width:100%;padding:12px;border-radius:10px;border:1px solid #3f3f55;margin:8px 0;background:#3a3a4d;color:#fff}
.auth-box button{width:100%;padding:12px;border-radius:10px;border:none;background:#0078d4;color:#fff;cursor:pointer;margin-top:8px}
.auth-box small{display:block;color:#aaa;text-align:center;margin-top:6px}

.banner{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);background:#9b1c1c;color:#fff;padding:10px 14px;border-radius:8px;display:none;z-index:99}
.typing-cursor{display:inline-block;width:1px;background:#fff;margin-left:2px;animation:blink 1s step-end infinite}
@keyframes blink{50%{opacity:0}}
.typing-row{align-self:flex-start;color:#fff}
.dots{display:inline-block}
.dots i{display:inline-block;width:6px;height:6px;border-radius:50%;background:#ddd;margin:0 2px;opacity:.3;animation:bounce 1.2s infinite}
.dots i:nth-child(2){animation-delay:.2s}.dots i:nth-child(3){animation-delay:.4s}
@keyframes bounce{0%,80%,100%{transform:translateY(0);opacity:.3}40%{transform:translateY(-4px);opacity:1}}

.to-bottom{position:fixed;right:20px;bottom:84px;background:#2f2f42;border:1px solid #4a4a60;color:#fff;padding:8px 10px;border-radius:999px;display:none;align-items:center;gap:6px;cursor:pointer}
.to-bottom.show{display:flex}

/* hide settings link on landing card */
.landing-actions a[href="settings.html"]{ display:none !important; }

/* small polish */
.new-topic-btn:hover{ filter:brightness(1.07); }
.top-controls .btn i{ font-size:14px; }
.user-chip .fa-gear{ color:#bbb }
.user-chip:hover .fa-gear{ color:#fff }

/* ------------------------------ */
/* ðŸ“± Mobile-friendly enhancements */
/* ------------------------------ */

/* safe height on mobile + prevent iOS zoom on inputs */
body{ min-height:100svh; }
input, textarea, select, button{ font-size:16px; }

/* smooth scroll on mobile lists */
.chat-area, .history-list{ -webkit-overflow-scrolling: touch; }

/* hamburger button (hidden on desktop) */
.topbar .menu-btn{
  display:none;
  align-items:center;
  gap:8px;
  padding:8px 10px;
  border:1px solid #333;
  border-radius:8px;
  background:#1a1a1a;
  color:#fff;
}

/* backdrop (hidden by default) */
.backdrop{ display:none; }

/* existing rule hides sidebar on small screens â€” we'll override below */
@media (max-width:900px){
  /* show hamburger */
  .topbar .menu-btn{ display:inline-flex; }

  /* slide-in sidebar */
  .sidebar{
    display:block;              /* override earlier display:none */
    position:fixed;
    inset:0 auto 0 0;           /* top:0; left:0; bottom:0 */
    width:min(85vw,320px);
    max-width:90vw;
    transform:translateX(-100%);
    transition:transform .25s ease;
    z-index:50;
    background:#232336;         /* ensure solid bg */
    box-shadow:2px 0 24px rgba(0,0,0,.45);
  }
  body.sidebar-open .sidebar{ transform:translateX(0); }

  /* dimmed backdrop */
  body.sidebar-open .backdrop{
    display:block;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.4);
    z-index:40;
  }

  /* main rails take full width */
  .container{ flex-direction:column; height:auto; min-height:100svh; }
  .main, .rail{ width:100%; }
  .composer textarea{ max-height:35vh; }
}

/* super small phones */
@media (max-width:400px){
  h1{ font-size:1.15rem; }
  .topbar .menu-btn{ padding:6px 8px; }
}

/* hide scrollbars visually */
body,.chat-area,.history-list{scrollbar-width:none}
body::-webkit-scrollbar,.chat-area::-webkit-scrollbar,.history-list::-webkit-scrollbar{width:0;height:0}
